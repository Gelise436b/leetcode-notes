

---

### ğŸ“Œ LeetCode 28ï¼šå®ç° strStr()  
**é¢˜ç›®è¦æ±‚**ï¼š  
åœ¨ä¸»ä¸² `haystack` ä¸­æŸ¥æ‰¾å­ä¸² `needle` ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚è‹¥ä¸å­˜åœ¨ï¼Œè¿”å› -1ï¼›è‹¥ `needle` ä¸ºç©ºï¼Œè¿”å› 0ã€‚

---

### âœ… æ­£ç¡®è§£æ³•ï¼ˆKMP ç®—æ³•ï¼‰

```cpp
/*
 * @lc app=leetcode.cn id=28 lang=cpp
 *
 * [28] æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡
 */
#include <iostream>
#include <string>
#include <vector>
#include <climits>
using namespace std;

class Solution {
public:
    int strStr(string haystack, string needle) {
        int n = haystack.size(), m = needle.size();
        if (m == 0) return 0;  // ç©ºæ¨¡å¼ä¸²ï¼ŒæŒ‰é¢˜æ„è¿”å› 0

        // Step 1: æ„å»º needle çš„å‰ç¼€å‡½æ•° pi
        vector<int> pi(m, 0);
        for (int i = 1, j = 0; i < m; ++i) {
            while (j > 0 && needle[i] != needle[j]) {
                j = pi[j - 1];  // å¤±é…æ—¶å›é€€
            }
            if (needle[i] == needle[j]) {
                ++j;
            }
            pi[i] = j;
        }

        // Step 2: ä½¿ç”¨ pi åœ¨ haystack ä¸­åŒ¹é…
        for (int i = 0, j = 0; i < n; ++i) {
            while (j > 0 && haystack[i] != needle[j]) {
                j = pi[j - 1];  // åˆ©ç”¨å·²åŒ¹é…ä¿¡æ¯è·³è½¬
            }
            if (haystack[i] == needle[j]) {
                ++j;
            }
            if (j == m) {
                return i - m + 1;  // æ‰¾åˆ°å®Œæ•´åŒ¹é…
            }
        }
        return -1;
    }
};
```

---

### ğŸ’¡ åæ€ä¸æ ¸å¿ƒè®¤çŸ¥

#### âŒ å½“å‰çŸ­æ¿ï¼šKMP å®Œå…¨æ— æ³•æ‰‹å†™
- è™½èƒ½ç”¨ `haystack.find(needle)` ä¸€è¡Œé€šè¿‡ï¼Œä½†**é¢è¯•æˆ–ç¦ç”¨åº“å‡½æ•°åœºæ™¯ä¸‹ä¼šç›´æ¥å¤±æ•ˆ**ã€‚
- å¯¹ KMP çš„ä¸¤ä¸ªå…³é”®é˜¶æ®µï¼ˆæ„å»º `pi` æ•°ç»„ + ä¸»ä¸²åŒ¹é…ï¼‰ç¼ºä¹ç†è§£ï¼Œå¯¼è‡´æ— æ³•ä»é›¶æ¨å¯¼ã€‚

#### âœ… KMP çš„æœ¬è´¨æ€æƒ³ï¼ˆä¸€å¥è¯ï¼‰
> **åˆ©ç”¨æ¨¡å¼ä¸² `needle` è‡ªèº«çš„é‡å¤ç»“æ„ï¼Œåœ¨å¤±é…æ—¶ä¸å›é€€ä¸»ä¸²æŒ‡é’ˆï¼Œè€Œæ˜¯å°†æ¨¡å¼ä¸²â€œæ™ºèƒ½æ»‘åŠ¨â€åˆ°æœ€é•¿å·²åŒ¹é…å‰ç¼€çš„ä½ç½®ç»§ç»­æ¯”è¾ƒã€‚**

#### ğŸ”‘ ä¸¤å¤§æ ¸å¿ƒæ­¥éª¤è§£æ

| é˜¶æ®µ | ç›®çš„ | å…³é”®æ“ä½œ |
|------|------|--------|
| **1. æ„å»º `pi` æ•°ç»„** | é¢„å¤„ç† `needle`ï¼Œè®°å½•æ¯ä¸ªå‰ç¼€çš„â€œæœ€é•¿ç›¸ç­‰çœŸå‰åç¼€é•¿åº¦â€ | `needle` è‡ªå·±å’Œè‡ªå·±æ¯”ï¼ŒåŠ¨æ€ç»´æŠ¤ `j = pi[i-1]` çš„å»¶ç»­ |
| **2. ä¸»ä¸²åŒ¹é…** | åœ¨ `haystack` ä¸­é«˜æ•ˆæŸ¥æ‰¾ `needle` | åˆ©ç”¨ `pi` å®ç° `j` çš„è·³è½¬ï¼Œé¿å…ä¸»ä¸²æŒ‡é’ˆ `i` å›é€€ |

> ğŸ’¬ ä¸ºä»€ä¹ˆå«â€œè‡ªå·±å’Œè‡ªå·±æ¯”â€ï¼Ÿ  
> å› ä¸º `pi[i]` è¡¨ç¤ºï¼š`needle[0..i]` çš„åç¼€èƒ½å¦å’Œå®ƒçš„æŸä¸ªå‰ç¼€å¯¹é½â€”â€”è¿™å®Œå…¨ç”± `needle` è‡ªèº«ç»“æ„å†³å®šï¼Œä¸ä¸»ä¸²æ— å…³ã€‚

#### âš ï¸ æ˜“é”™ç»†èŠ‚
- `pi[0]` æ’ä¸º 0ï¼ˆå•å­—ç¬¦æ— çœŸå‰åç¼€ï¼‰ï¼›
- ä¸¤ä¸ª `while (j > 0 && ...)` ä¸­çš„ `j > 0` æ˜¯ä¸ºäº†é˜²æ­¢è®¿é—® `pi[-1]`ï¼Œä¸” `j=0` æ—¶å·²æ— å‰ç¼€å¯é€€ï¼›
- åŒ¹é…æˆåŠŸæ—¶è¿”å› `i - m + 1`ï¼ˆå½“å‰ `i` æ˜¯åŒ¹é…ç»“æŸä½ç½®ï¼‰ã€‚

---

### ğŸ§  å­¦ä¹ å»ºè®®ï¼šå¦‚ä½•æ”»å…‹ KMPï¼Ÿ

1. **å…ˆæŒæ¡æš´åŠ›è§£æ³•**ï¼ˆåŒå±‚å¾ªç¯ï¼‰ï¼Œç†è§£â€œä¸ºä»€ä¹ˆéœ€è¦ä¼˜åŒ–â€ï¼›
2. **æ‰‹åŠ¨æ¨¡æ‹Ÿ `pi` æ„å»ºè¿‡ç¨‹**ï¼ˆå¦‚ `needle = "ababac"`ï¼‰ï¼Œç”»è¡¨ç†è§£ `pi[i]` å«ä¹‰ï¼›
3. **åˆ†æ­¥è®°å¿†æ¨¡æ¿**ï¼š
   - æ„å»º `pi`ï¼š`i` ä» 1 å¼€å§‹ï¼Œ`j` åˆå§‹ä¸º 0ï¼›
   - åŒ¹é…è¿‡ç¨‹ï¼š`i` éå†ä¸»ä¸²ä¸å›å¤´ï¼Œ`j` æ ¹æ® `pi` è·³è½¬ï¼›
4. **ä¸è¦æ­»è®°ä»£ç **ï¼Œè€Œè¦ç†è§£æ¯ä¸€æ­¥â€œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšâ€ã€‚

> âœ¨ æ¨èç»ƒä¹ é¡ºåºï¼š  
> æš´åŠ›åŒ¹é… â†’ æ‰‹åŠ¨è®¡ç®— `pi` æ•°ç»„ â†’ åˆ†æ­¥å†™ KMPï¼ˆå…ˆå†™æ„å»º `pi`ï¼Œå†å†™åŒ¹é…ï¼‰â†’ åˆå¹¶å®Œæ•´ä»£ç ã€‚

---

### ğŸ“š å»¶ä¼¸å¯¹æ¯”ï¼šä¸‰ç§è§£æ³•ä¼˜åŠ£

| æ–¹æ³• | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | æ˜¯å¦éœ€æ‰‹å†™ | é€‚ç”¨åœºæ™¯ |
|------|-----------|-----------|----------|--------|
| `haystack.find(needle)` | O(nÂ·m) å¹³å‡å¿« | O(1) | å¦ | æ—¥å¸¸å¼€å‘ã€éé¢è¯• |
| æš´åŠ›åŒå¾ªç¯ | O(nÂ·m) | O(1) | æ˜¯ | ç®€å•åœºæ™¯ã€ç†è§£åŸºç¡€ |
| **KMP** | **O(n + m)** | **O(m)** | **æ˜¯** | **é¢è¯•é«˜é¢‘ã€å¤§æ•°æ®é‡** |

---

### ğŸ”œ æ˜æ—¥è¡ŒåŠ¨é¡¹
- âœï¸ **æ‰‹å†™ KMP ä¸¤é**ï¼šç¬¬ä¸€éçœ‹ä»£ç é»˜å†™ï¼Œç¬¬äºŒéä¸çœ‹ä»£ç ä»å¤´æ¨å¯¼ï¼›
- ğŸ“– **ç²¾è¯» KMP åŸç†å›¾è§£**ï¼ˆæ¨èã€Šç®—æ³•å¯¼è®ºã€‹æˆ– labuladong çš„ KMP è®²è§£ï¼‰ï¼›
- ğŸ§ª **æµ‹è¯•ç”¨ä¾‹éªŒè¯**ï¼šå¦‚ `haystack="mississippi"`, `needle="issip"`ï¼Œè·Ÿè¸ª `pi` å’ŒåŒ¹é…è¿‡ç¨‹ã€‚

---
