

---

### 📌 LeetCode 125：验证回文串（Valid Palindrome）  
**题目要求**：  
给定一个字符串，判断它是否是回文串。只考虑字母和数字字符，并忽略字母的大小写。

---

### ✅ 正确解法（双指针 + 标准库函数）

```cpp
/*
 * @lc app=leetcode.cn id=125 lang=cpp
 *
 * [125] 验证回文串
 */
#include <iostream>
#include <string>
#include <cctype>   // 注意：isalnum 和 tolower 定义在 <cctype> 中
using namespace std;

class Solution {
public:
    bool isPalindrome(string s) {
        int i = 0, j = s.size() - 1;
        while (i < j) {
            // 跳过非字母数字字符（左侧）
            if (!isalnum(s[i])) {
                i++;
            }
            // 跳过非字母数字字符（右侧）
            else if (!isalnum(s[j])) {
                j--;
            }
            // 比较当前字符（转为小写后）
            else if (tolower(s[i]) == tolower(s[j])) {
                i++;
                j--;
            }
            // 不匹配，直接返回 false
            else {
                return false;
            }
        }
        return true;
    }
};
```

---

### 🔍 关键知识点总结

| 函数 | 所在头文件 | 作用 |
|------|------------|------|
| `isalnum(c)` | `<cctype>` | 判断字符 `c` 是否为 **字母（a–z, A–Z）或数字（0–9）**，返回 `bool` |
| `tolower(c)` | `<cctype>` | 将大写字母转为小写；若非大写字母则原样返回 |

> ⚠️ 注意：虽然某些编译器在包含 `<iostream>` 或 `<string>` 时可能间接引入 `<cctype>`，但**显式包含 `<cctype>` 是良好实践**，避免未定义行为。

---

### 💡 反思与收获

- **卡点原因**：  
  初期不了解 `isalnum()` 的存在，试图手动判断字符范围（如 `('a' <= c && c <= 'z') || ...`），导致代码冗长、易错且难以维护。

- **正确思路**：  
  回文串问题本质是**对称比较**，配合**双指针**从两端向中间收缩，过程中：
  1. 跳过无关字符（非字母数字）；
  2. 统一大小写后比较；
  3. 一旦不等即非回文。

- **经验提升**：  
  熟悉 C++ 标准库中的字符处理函数（`<cctype>`）能极大简化字符串预处理逻辑，避免重复造轮子。

---

### 🧩 延伸思考

- 若不允许使用 `isalnum` 和 `tolower`，如何手动实现？  
  → 可通过 ASCII 范围判断：
  ```cpp
  bool isAlnum(char c) {
      return (c >= '0' && c <= '9') ||
             (c >= 'a' && c <= 'z') ||
             (c >= 'A' && c <= 'Z');
  }
  char toLower(char c) {
      return (c >= 'A' && c <= 'Z') ? c - 'A' + 'a' : c;
  }
  ```

- 时间复杂度：**O(n)**，每个字符最多访问一次；  
  空间复杂度：**O(1)**，仅用常数额外空间。

---
